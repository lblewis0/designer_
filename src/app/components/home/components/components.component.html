<div class="c-main-div">
    <div class="title-div">
        <label class="title">Components</label>
    </div>
    <div class="content-div">
        <div class="main-ul">
            <ng-container *ngFor="let element of projectTree.elements; let i=index" 
            [ngTemplateOutlet]="elementTemplate"
            [ngTemplateOutletContext]="{ $implicit: element}"></ng-container>
        </div>
    </div>
</div>

<ng-template #elementTemplate let-element>
    <div class="li-group">
        <div [ngClass]="{'li-element': element.isSelected === false,
                         'li-element-selected' : element.isSelected === true}" 
             [style.padding-left.px]="(element.indent * 20) + 10"
             (click)="onClickTreeElement(element)"
             (contextmenu)="onRightClickTreeElement($event, element.id, element.type)">
             <div *ngIf="!element.childs" class="li-element-expander-hidden"></div>
             <svg *ngIf="element.isExpanded && element.childs && element.childs.length > 0" 
                  class="li-element-expander"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 -960 960 960">
                  <path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/>
            </svg>
            <svg *ngIf="!element.isExpanded && element.childs && element.childs.length > 0" 
                  class="li-element-expander"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 -960 960 960">
                  <path d="M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"/>
            </svg>
            <svg *ngIf="element.type ==='folder'" 
                 class="li-element-icon-folder"
                 xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 -960 960 960">
                 <path *ngIf="!element.isExpanded" d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/>
                 <path *ngIf="element.isExpanded" d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640H447l-80-80H160v480l96-320h684L837-217q-8 26-29.5 41.5T760-160H160Zm84-80h516l72-240H316l-72 240Zm0 0 72-240-72 240Zm-84-400v-80 80Z"/>
            </svg>
            <svg *ngIf="element.type ==='file'" 
                 class="li-element-icon-file"
                 xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 -960 960 960">
                 <path [attr.d]="element.iconPath"/>
            </svg>
            <a class="li-element-a">{{element.name}}</a>
        </div>
        <!-- div si li selectionnÃ© et qu'il a des enfants-->
        <div *ngIf="element.isExpanded && element.childs && element.childs.length > 0" class="li-element-childs-div">
            <ng-container>
                <div class="child-ul">
                    <ng-container *ngFor="let childElement of element.childs; let i=index" 
                    [ngTemplateOutlet]="elementTemplate" 
                    [ngTemplateOutletContext]="{$implicit: childElement}"></ng-container>
                </div>
            </ng-container>
        </div>           
    </div>
</ng-template>
